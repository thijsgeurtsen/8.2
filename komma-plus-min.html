<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Kommagetallen + en ‚àí</title>
  <style>
    body{font-family:system-ui,sans-serif;background:#f4f4ff;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0}
    .container{background:#fff;padding:2rem 2.5rem;border-radius:1.5rem;box-shadow:0 10px 30px rgba(0,0,0,.1);max-width:580px;width:95%;text-align:center}
    .back{font-size:.85rem;margin-bottom:1rem;text-align:left}
    .back a{color:#4f46e5;text-decoration:none}
    h1{margin:0 0 .4rem;font-size:1.9rem}
    .subtitle{color:#555;margin:0 0 1.3rem;font-size:.95rem}
    .stats{display:flex;justify-content:space-between;gap:.75rem;flex-wrap:wrap;margin-bottom:1rem;font-size:1rem}
    .question{font-size:2.4rem;margin:1rem 0;min-height:2.4rem}
    #answer{font-size:1.6rem;padding:.4rem .8rem;width:240px;text-align:center;border-radius:.75rem;border:2px solid #ccc;outline:none}
    #answer:focus{border-color:#4f46e5;box-shadow:0 0 0 3px rgba(79,70,229,.15)}
    button{margin-top:1.1rem;padding:.75rem 1.5rem;font-size:1rem;border-radius:999px;border:none;cursor:pointer;background:#4f46e5;color:#fff;font-weight:800}
    button:disabled{background:#bbb;cursor:default}
    .hint{color:#666;font-size:.9rem;margin-top:-.4rem}
    .feedback{height:1.4rem;margin-top:.5rem;font-weight:900}
    .correct{color:#16a34a}
    .wrong{color:#dc2626}
    .result{margin-top:1.2rem;font-size:1rem}
  </style>
</head>
<body>
  <div class="container">
    <div class="back"><a href="index.html">‚Üê Terug</a></div>
    <h1>Rekenoefeningen</h1>
    <p class="subtitle">Kommagetallen optellen en aftrekken</p>

    <div class="stats">
      <div>‚è± <span id="time">2:00</span></div>
      <div>‚úÖ <span id="score">0</span></div>
      <div>üìä <span id="attempts">0</span></div>
    </div>

    <div class="question" id="question">Druk op start</div>
    <div class="hint">Je mag komma of punt typen (bijv. 3,5 of 3.5). Enter om te controleren.</div>

    <input id="answer" type="text" disabled placeholder="antwoord">
    <div id="feedback" class="feedback"></div>

    <button id="startBtn">Start 2-minutentest</button>
    <div id="result" class="result"></div>
  </div>

<script>
  const timeEl=document.getElementById("time");
  const scoreEl=document.getElementById("score");
  const attemptsEl=document.getElementById("attempts");
  const questionEl=document.getElementById("question");
  const answerEl=document.getElementById("answer");
  const feedbackEl=document.getElementById("feedback");
  const startBtn=document.getElementById("startBtn");
  const resultEl=document.getElementById("result");

  let timeLeft=120,timer=null,score=0,attempts=0,active=false;
  let correct=0;

  function fmt(s){return Math.floor(s/60)+":"+String(s%60).padStart(2,"0");}
  function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
  function norm(s){return (s||"").trim().replace(",",".");}

  function makeNumber(){
    // 1 of 2 decimalen
    const decimals = (Math.random()<0.5) ? 1 : 2;
    const scale = decimals===1 ? 10 : 100;
    // maak getal tussen 0.0 en 99.99
    const n = randInt(0, 99*scale) / scale;
    return {n, decimals};
  }

  function toStr(n){
    // toon met 1 of 2 decimalen (maar zonder onnodige nullen achteraan)
    const s = n.toFixed(2).replace(/0+$/,"").replace(/\.$/,"");
    return s;
  }

  function newQ(){
    const isPlus = Math.random()<0.5;
    const a = makeNumber().n;
    const b = makeNumber().n;

    let res = isPlus ? (a+b) : (a-b);

    // houd resultaten een beetje netjes (geen superlange kommagetallen)
    // en voorkom te vaak negatieve resultaten:
    let A=a, B=b, op=isPlus?"+":"-";
    if(!isPlus && a<b){
      // wissel om zodat resultaat vaak >= 0
      A=b; B=a;
      res = A - B;
    }

    correct = Number(res.toFixed(2)); // omdat we met 1/2 decimalen werken
    questionEl.textContent = `${toStr(A)} ${op} ${toStr(B)} = ?`;
    answerEl.value="";
    answerEl.focus();
  }

  function start(){
    if(active) return;
    active=true; score=0; attempts=0; timeLeft=120;
    scoreEl.textContent=0; attemptsEl.textContent=0;
    feedbackEl.textContent=""; resultEl.textContent="";
    answerEl.disabled=false; startBtn.disabled=true;

    newQ();
    timeEl.textContent=fmt(timeLeft);
    timer=setInterval(()=>{
      timeLeft--; timeEl.textContent=fmt(timeLeft);
      if(timeLeft<=0) end();
    },1000);
  }

  function end(){
    if(!active) return;
    active=false; clearInterval(timer);
    answerEl.disabled=true; startBtn.disabled=false;
    const pct=Math.round((score/attempts)*100)||0;
    resultEl.textContent=`Je had ${score} goed van ${attempts} (${pct}%).`;
  }

  function submit(){
    if(!active) return;
    const raw = norm(answerEl.value);
    if(raw==="") return;

    const user = Number(raw);
    attempts++; attemptsEl.textContent=attempts;

    const ok = Number.isFinite(user) && Math.abs(user - correct) < 0.01;

    if(ok){
      score++; scoreEl.textContent=score;
      feedbackEl.textContent="Goed!";
      feedbackEl.className="feedback correct";
    } else {
      feedbackEl.textContent=`Helaas, het was ${correct}.`;
      feedbackEl.className="feedback wrong";
    }
    newQ();
  }

  startBtn.addEventListener("click", start);
  answerEl.addEventListener("keydown",(e)=>{ if(e.key==="Enter") submit(); });
</script>
</body>
</html>
